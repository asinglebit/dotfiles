# Set a different prefix key
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Set status bar to top
set-option -g status-position top

# Enable full mouse support
set -g mouse on

# Set maximum number of lines in window history
set -g history-limit 50000

# Increase tmux messages display duration from 750ms to 4s
set -g display-time 4000

# Set default terminal (fallbacks to $TERM)
set -g default-terminal "xterm-256color"

# Make colors inside tmux look the same as outside
# see https://github.com/tmux/tmux/issues/696
# see https://stackoverflow.com/a/41786092
set -ga terminal-overrides ",xterm-256color:Tc"

# Ensure window index numbers get reordered on delete
set -g renumber-windows on

# Start windows and panes index at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# Refresh status bar more often, from every 15s to 5s
set -g status-interval 5

# Kill current pane with prefix + x
bind x kill-pane

# Easier and faster switching between next/prev window
bind -r p previous-window
bind -r n next-window

# Easier and faster switching between next/prev sessions
bind -r ) switch-client -n
bind -r ( switch-client -p

# Binding to source tmux config
bind r \
    source-file ~/.tmux.conf\; \
    display ".tmux.conf sourced"

# Bindings to move current window one position left or right
bind -r "<" swap-window -d -t -1
bind -r ">" swap-window -d -t +1

# Better bindings to split windows
bind -r '\' split-window -h
bind -r '-' split-window -v

# Bindings to split windows with initial path as path of current pane
bind -r '|' split-window -h -c '#{pane_current_path}'
bind -r '_' split-window -v -c '#{pane_current_path}'

# Bindings to resize panes
bind -r C-Up resize-pane -U 5
bind -r C-Down resize-pane -D 5
bind -r C-Left resize-pane -L 5
bind -r C-Right resize-pane -R 5

# Bindings to switch panes
bind -r Up select-pane -U
bind -r Down select-pane -D
bind -r Left select-pane -L
bind -r Right select-pane -R
bind -r C-k select-pane -U
bind -r C-j select-pane -D
bind -r C-h select-pane -L
bind -r C-l select-pane -R
bind -n M-h select-pane -L
bind -n M-j select-pane -D
bind -n M-k select-pane -U
bind -n M-l select-pane -R

# Binding to switch to last pane
bind -r \; last-pane -Z

# Bindings to create new window with initial path as path of current pane
bind -r C new-window -c '#{pane_current_path}'

# Binding to clear pane screen and history
# Need to wait before running clear-history for it to work
bind C-q \
    send-keys C-l\; \
    run 'sleep 0.1'\; \
    clear-history

# Plugin manager
set -g @plugin 'tmux-plugins/tpm'

# Powerline
set -g @plugin 'asinglebit/tmux2k-forked'
set -g @tmux2k-icons-only false
set -g @tmux2k-bandwidth-network-name "enp4s0"
set -g @tmux2k-left-plugins "cwd git"
set -g @tmux2k-right-plugins "cpu ram time"

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'

